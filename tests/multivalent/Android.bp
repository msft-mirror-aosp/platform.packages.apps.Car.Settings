// Copyright (C) 2024 The Android Open Source Project
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.

package {
    default_team: "trendy_team_system_experience",
    default_applicable_licenses: ["Android-Apache-2.0"],
}

android_robolectric_test {
    name: "CarSettingsMultivalentRoboTests",
    srcs: [
        "src/**/*.kt",
        // Goal is have `src/**/*.java` (i.e. all tests to work w/ Robolectric)
        // "src/**/AccountDetailsPreferenceControllerTest.java",
        "src/**/AccountGroupPreferenceControllerTest.java",
        "src/**/AddMobileNetworkPreferenceControllerTest.java",
        // "src/**/AddProfilePreferenceControllerTest.java",
        "src/**/AllAppsPreferenceControllerTest.java",
        "src/**/BluetoothStateSwitchPreferenceControllerTest.java",
        "src/**/CellularFallbackTogglePreferenceControllerTest.java",
        "src/**/ChooseLockTypePreferenceControllerTest.java",
        "src/**/ConfirmLockLockoutHelperTest.java",
        "src/**/DataLimitPreferenceControllerTest.java",
        "src/**/DataUsageEditTextPreferenceControllerTest.java",
        "src/**/DataUsageSummaryPreferenceControllerTest.java",
        "src/**/DataWarningPreferenceControllerTest.java",
        "src/**/DatePickerPreferenceControllerTest.java",
        "src/**/DefaultAssistantPickerEntryPreferenceControllerTest.java",
        "src/**/DomainUrlsUtilsTest.java",
        "src/**/KeyboardManagementPreferenceControllerTest.java",
        // "src/**/LanguageBasePreferenceControllerTest.java",
        "src/**/LegalPreferenceControllerTest.java",
        "src/**/LocationInfotainmentAppsPreferenceControllerTest.java",
        "src/**/LocationRecentAccessViewAllPreferenceControllerTest.java",
        "src/**/LocationServicesPreferenceControllerTest.java",
        "src/**/LockTypeBasePreferenceControllerTest.java",
        "src/**/ManageCameraPermissionsPreferenceControllerTest.java",
        "src/**/ManageMicPermissionsPreferenceControllerTest.java",
        "src/**/MediaVolumeSliderWorkerTest.java",
        "src/**/MicTogglePreferenceControllerTest.java",
        "src/**/MicrophoneRecentAccessViewAllPreferenceControllerTest.java",
        "src/**/MoreSpecialAccessPreferenceControllerTest.java",
        "src/**/NotificationsPreferenceControllerTest.java",
        "src/**/PreferenceControllerTest.java",
        // "src/**/ProfileDetailsActionButtonsPreferenceControllerTest.java",
        "src/**/RecentAppsViewAllPreferenceControllerTest.java",
        "src/**/ResetNetworkEntryPreferenceControllerTest.java",
        "src/**/SettingsQCRegistryTest.java",
        // "src/**/StorageApplicationActionButtonsPreferenceControllerTest.java",
        "src/**/StorageApplicationListPreferenceControllerTest.java",
        "src/**/StorageSettingsManagerTest.java",
        "src/**/SubscriptionsChangeListenerTest.java",
        "src/**/ThemeTogglePreferenceControllerTest.java",
        "src/**/ThirdPartyLicensePreferenceControllerTest.java",
        "src/**/TimeZonePickerPreferenceControllerTest.java",
        "src/**/UnitsBasePreferenceControllerTest.java",
        "src/**/UnitsPressurePreferenceControllerTest.java",
        "src/**/WifiTetherPreferenceControllerTest.java",
        "src/**/testutils/*.java",
        "src/**/TestBluetoothRequestPermissionActivity.java",
        "src/**/BaseCarSettingsActivityTestCase.java",
        "src/**/FakePreferenceController.java",
        "src/**/PreferenceControllerTestUtil.java",
        "src/**/SettingsFragmentTestCase.java",
        "src/**/BaseAdminGrantedPermissionsApplicationListPreferenceControllerTestCase.java",
        "src/**/BaseAdminGrantedPermissionsPreferenceControllerTestCase.java",
        "src/**/BaseEnterprisePreferenceControllerTestCase.java",
        "src/**/BaseEnterprisePrivacyPreferenceControllerTestCase.java",
        "src/**/BaseEnterpriseTestCase.java",
        "src/**/DefaultDeviceAdminReceiver.java",
        "src/**/FancyDeviceAdminReceiver.java",
        "src/**/BaseSettingsQCItemTestCase.java",
        "src/**/BrightnessSliderTestCase.java",
        "src/**/MobileDataBaseWorkerTestCase.java",
        "src/**/QCTestUtils.java",
        "src/**/TestSettingsQCBackgroundWorker.java",
        "src/**/TestSettingsQCItem.java",
        "src/**/VolumeSliderTestCase.java",
        "src/**/WifiBaseWorkerTestCase.java",
        "src/**/FactoryResetFragmentTestCase.java",
        "src/**/LegalPreferenceControllerTestCase.java",
        "src/**/BaseCarSettingsTestActivity.java",
        "src/**/BaseTestSettingsFragment.java",
        "src/**/BluetoothTestUtils.java",
        "src/**/DialogTestUtils.java",
        "src/**/DualPaneTestActivity.java",
        "src/**/EmptySettingsFragment.java",
        "src/**/EnterpriseTestUtils.java",
        "src/**/PollingCheck.java",
        "src/**/ResourceTestUtils.java",
        "src/**/RootTestSettingsFragment.java",
        "src/**/SinglePaneTestActivity.java",
        "src/**/TestContentProvider.java",
        "src/**/TestEventListener.java",
        "src/**/TestFinishActivity.java",
        "src/**/TestLifecycleOwner.java",
        "src/**/TestSettingsFragment1.java",
        "src/**/TestSettingsFragment2.java",
        "src/**/TestSettingsScreenLockActivity.java",
        "src/**/TestTopLevelMenuFragment.java",
        "src/**/TextDrawable.java",
        "src/**/WifiDetailsBasePreferenceControllerTestCase.java",
        ":CarSettingsShadows-srcs",
    ],
    libs: [
        "android.car.test.utils",
        "android.car",
        "android.test.base.stubs.system",
        "android.test.mock.stubs.system",
        "android.test.runner.stubs.system",
        "android.test.runner.stubs.system",
        "androidx.test.core",
        "androidx.test.ext.junit",
        "androidx.test.ext.truth",
        "androidx.test.rules",
        "androidx.test.runner",
        "car-helper-lib",
        "flag-junit",
        "inline-mockito-robolectric-prebuilt",
        "mockito-kotlin2",
        "mockito-target-extended-minus-junit4",
        "platform-test-annotations",
        "testng",
        "truth",
    ],
    java_resource_dirs: ["config"],
    instrumentation_for: "CarSettingsAppForMultivalentTesting",
    test_options: {
        timeout: 36000,
    },
    upstream: true,
    strict_mode: false,
}

android_test {
    name: "CarSettingsMultivalentDeviceTests",
    certificate: "platform",
    privileged: true,
    srcs: [
        "src/**/*.kt",
        "src/**/*.java",
    ],
    libs: [
        "android.test.runner.stubs.system",
        "android.test.base.stubs.system",
        "android.test.mock.stubs.system",
    ],
    static_libs: [
        "CarSettingsLibForDeviceTesting",
        "android.car",
        "android.car.test.utils",
        "androidx.test.core",
        "androidx.test.rules",
        "androidx.test.ext.junit",
        "androidx.test.ext.truth",
        "flag-junit",
        "mockito-kotlin2",
        "mockito-target-extended-minus-junit4",
        "platform-test-annotations",
        "truth",
        "testng",
        "car-helper-lib",
        "collector-device-lib-platform",
    ],
    jni_libs: [
        "libdexmakerjvmtiagent",
        "libstaticjvmtiagent",
    ],
    aaptflags: ["--extra-packages com.android.car.settings"],
    test_suites: [
        "device-tests",
        "automotive-tests",
    ],
    compile_multilib: "64",
    // TODO(b/319708040): re-enable use_resource_processor
    use_resource_processor: false,
    test_config: "CarSettingsMultivalentDeviceTests-AndroidTest.xml",
}

/* Future Ravenwood tests can be added like this if required.
android_ravenwood_test {
    name: "CarSettingsMultivalentRavenTests",
    srcs: [],
}
*/
